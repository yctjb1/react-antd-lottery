(this["webpackJsonpreact-antd-lottery"]=this["webpackJsonpreact-antd-lottery"]||[]).push([[0],{135:function(e,t){},155:function(module,__webpack_exports__,__webpack_require__){"use strict";var E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(167),E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(46),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(59),antd__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(60),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(282),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(131),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(283),_components_SettingModal__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(156),_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(281),_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(280),_utils_handleExcel__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(83),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(66),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13__),lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(162),lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14__),lodash_isEqual__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(45),lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_15__),_index_less__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(271),_index_less__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_16__),Option=antd__WEBPACK_IMPORTED_MODULE_3__.a.Option,getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e};__webpack_exports__.a=function(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({tcRunning:!1,settingModal:!1}),_useState2=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),tcOptions=_useState2[0],setTCOptions=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({awards:[{awardlevel:"\u4e00\u7b49\u5956",awardname:"\u6469\u6258",awardnum:1,key:"1"},{awardlevel:"\u4e8c\u7b49\u5956",awardname:"\u5355\u8f66",awardnum:2,key:"2"}],currentAwardKey:"1",currentAwardLeft:0}),_useState4=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),awardOptions=_useState4[0],setAwardOptions=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({awardeePlayers:[],members:[{usercode:"01",username:"\u6d4b\u8bd5\u7532",key:"1"},{usercode:"02",username:"\u6d4b\u8bd5\u4e59",key:"2"}],currentplayers:[]}),_useState6=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),memberOptions=_useState6[0],setMemberOptions=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({reducemode:!0,shownowresult:!1,active_resultsNumber:0,result:[]}),_useState8=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState7,2),lotterOptions=_useState8[0],setLotterOptions=_useState8[1];Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){if(queryLocalStorage());else{setMemberOptions(Object.assign({},memberOptions,{currentplayers:memberOptions.members}));var e=createOption(awardOptions)[0];setLotterOptions(Object.assign({},lotterOptions,{active_resultsNumber:e})),updateCurrentAwardLeft()}initTC()}),[]),Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){tcOptions.tcRunning?initTC("TagCanvas.SetSpeed('myCanvas', [5, 1]);TagCanvas.Reload('myCanvas')"):initTC()}),[tcOptions.tcRunning,memberOptions,tcOptions.settingModal,awardOptions,lotterOptions]);var initTC=function initTC(str){eval("try {\n             TagCanvas.Start(\n               'myCanvas',\n               '',\n               {textColour: null,\n                dragControl: 1,\n                decel: 0.95,\n                textHeight: 14,\n                minSpeed: 0.01,\n                initial: [\n                  0.1 * Math.random() + 0.01,\n                  -(0.1 * Math.random() + 0.01),\n                ]\n            });\n            ".concat(str||"","\n           }\n           catch(e) {\n             document.getElementById('myCanvasContainer').style.display = 'none';\n           }"))},changeSpeed=function(e){"start"===e?setTCOptions(Object.assign({},tcOptions,{tcRunning:!0})):"stop"===e&&setTCOptions(Object.assign({},tcOptions,{tcRunning:!1}))},handleSettingModal=function(e){setTCOptions(Object.assign({},tcOptions,{settingModal:e}))},backFromChild=function(e,t,a){e.awards=e.awards.filter((function(e){return!!(e.awardlevel&&e.awardname&&e.awardnum)})),t.members=t.members.filter((function(e){return!(!e.usercode||!e.username)}));var _=memberOptions.members,r=t.members,n=awardOptions.awards,l=e.awards,i=lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(_,r,lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default.a),o=lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(n,l,lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default.a),s=(lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(_,i,lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default.a),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(r,i,lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default.a),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(n,o,lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default.a)),c=(lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(n,o,lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default.a),[]),u=s.map((function(e){return e.key}));n.map((function(e){l.map((function(t){e.key===t.key&&e.awardlevel!==t.awardlevel&&e.awardname!==t.awardname&&c.push(e.key)}))}));var d=JSON.parse(JSON.stringify(lotterOptions));d.result.map((function(e,t){(c.indexOf(e.awardKey)>-1||u.indexOf(e.awardKey)>-1)&&delete d.result[t]})),d.result=d.result.filter((function(e){return e})),d.result=d.result.map((function(e){e.awardeeArr=lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14___default()(e.awardeeArr,r,lodash_isEqual__WEBPACK_IMPORTED_MODULE_15___default.a)})),t.awardeePlayers=[];var E=0,O=d.result.filter((function(t){return(null===t||void 0===t?void 0:t.awardKey)==e.currentAwardKey})),m=O.length?O[0].awardeeArr.length:0;e.awards.map((function(t){t.key===e.currentAwardKey&&(E=Number(t.awardnum)),E-=m})),e.currentAwardLeft=E,a&&(d.result=[],t.currentplayers=t.members),handleSettingModal(!1),setAwardOptions(e),setMemberOptions(t),setLotterOptions(d)},handleChangeAward=function(e){var t,a;if(setMemberOptions(Object.assign({},memberOptions,{awardeePlayers:[]})),"next"===e){var _=-1,r=awardOptions.awards;if(r.map((function(e,t){e.key===awardOptions.currentAwardKey&&(_=t+1)})),!(_>-1&&_<=r.length-1))return;t=r[_].key}else t=e;var n=0,l=lotterOptions.result.filter((function(e){return e.awardKey==t})),i=l.length?l[0].awardeeArr.length:0;awardOptions.awards.map((function(e){e.key===t&&(n=Number(e.awardnum)),n-=i})),a=Object.assign({},awardOptions,{currentAwardKey:t,currentAwardLeft:n});var o=createOption(a)[0];setLotterOptions(Object.assign({},lotterOptions,{active_resultsNumber:o})),setAwardOptions(a)},handleStop=function(){var e=lotterOptions.active_resultsNumber,t=createOption(awardOptions)[0],a=awardOptions.currentAwardLeft,_=JSON.parse(JSON.stringify(memberOptions.members)),r=JSON.parse(JSON.stringify(memberOptions.currentplayers)),n=lotterOptions.reducemode?r.length:_.length,l=-1,i=JSON.parse(JSON.stringify(lotterOptions.result)),o=[];i.length&&i.map((function(e,t){e.awardKey===awardOptions.currentAwardKey&&(l=t),o.push.apply(o,Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.awardeeArr))}));for(var s,c,u,d=Math.min(e,t,a,n),E=[],O=0;O<d&&E.length<e;O++){var m=getRandomInt(0,n-1),p=lotterOptions.reducemode?r[m]:_[m];if(JSON.stringify(E).indexOf(JSON.stringify(p))>-1)d+=1;else{var f=l>-1?i[l].awardeeArr:[];JSON.stringify(f).indexOf(JSON.stringify(p))>-1?d+=1:JSON.stringify(o).indexOf(JSON.stringify(p))>-1?lotterOptions.reducemode?d+=1:(E.push(p)):(E.push(p),n--,lotterOptions.reducemode&&r.splice(m,1))}}l>-1?null===(s=i[l])||void 0===s||(c=s.awardeeArr).push.apply(c,E):i.push({awardKey:awardOptions.currentAwardKey,awardeeArr:E});lotterOptions.reducemode?(u=Object.assign({},memberOptions,{currentplayers:r,awardeePlayers:E}),setMemberOptions(u)):(u=Object.assign({},memberOptions,{awardeePlayers:E}),setMemberOptions(u));var M=Object.assign({},lotterOptions,{shownowresult:!0,result:i});setLotterOptions(M);var P=Object.assign({},awardOptions,{currentAwardLeft:t-E.length});setAwardOptions(P);var D=Object.assign({},tcOptions,{tcRunning:!1});setTCOptions(D),updateLocalStorage("updateAll",{tcOptions:D,awardOptions:P,memberOptions:u,lotterOptions:M})},handleClear=function(e,t){if("all"===e){setMemberOptions(Object.assign({},memberOptions,{currentplayers:memberOptions.members,awardeePlayers:[]}));var a=Object.assign({},lotterOptions,{shownowresult:!1,reducemode:t||!1,result:[]});setLotterOptions(a),updateCurrentAwardLeft(awardOptions.currentAwardKey,0,a),updateLocalStorage("clearAll")}},handleReduceMode=function(e){handleClear("all",e)},updateCurrentAwardLeft=function(e,t,a){var _=e||"1",r=0,n=(a||lotterOptions).result.filter((function(e){return e.awardKey===_})),l=n.length?n[0].awardeeArr.length:0;awardOptions.awards.map((function(e){e.key===_&&(r=Number(e.awardnum),t&&(r-=t),r-=l)})),setAwardOptions(Object.assign({},awardOptions,{currentAwardLeft:r}))},updateLocalStorage=function(e,t){e&&"clearAll"===e?localStorage.removeItem("react_antd_lottery"):localStorage.setItem("react_antd_lottery",JSON.stringify(t))},queryLocalStorage=function(){var e=localStorage.getItem("react_antd_lottery")||void 0;return!!e&&(e=JSON.parse(e),setTCOptions(e.tcOptions),setAwardOptions(e.awardOptions),setMemberOptions(e.memberOptions),setLotterOptions(e.lotterOptions),!0)},handleExport=function(){var e=lotterOptions.result,t=awardOptions.awards,a=[];e.map((function(e){var _=t.filter((function(t){return t.key===e.awardKey}))[0];a[_.awardlevel]=e.awardeeArr})),Object(_utils_handleExcel__WEBPACK_IMPORTED_MODULE_12__.b)(a)},createOption=function(e){var t=0;e.awards.map((function(a){a.key===e.currentAwardKey&&(t=Number(a.awardnum)<0?0:Number(a.awardnum))}));for(var a=[],_=t;a.push(_--)<t+1;);return a},LeftPart=function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("ul",{className:"operation_ul"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,"\u5956\u9879:",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{value:awardOptions.currentAwardKey,style:{width:120},disabled:tcOptions.tcRunning,onChange:function(e){return handleChangeAward(e)}},awardOptions.awards.map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Option,{key:e.key,value:e.key},e.awardlevel)})))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__.a,{title:"\u6ce8:\u5207\u6362\u5254\u9664\u5c06\u91cd\u7f6e\u4e2d\u5956\u7ed3\u679c"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__.a,{disabled:tcOptions.tcRunning,checkedChildren:"\u5254\u9664\u5df2\u4e2d\u5956",unCheckedChildren:"\u4fdd\u7559\u5df2\u4e2d\u5956",checked:lotterOptions.reducemode,onChange:function(e){return handleReduceMode(e)}}),"\u5269\u4f59:",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("b",null,memberOptions.currentplayers.length,"\u4eba"))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,tcOptions.tcRunning?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{onClick:function(){return handleStop()},style:{borderRadius:"25px 0 0 25px"},icon:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__.a,{style:{display:"inline-grid",placeItems:"center"}})},"\u505c\u6b62"):react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{onClick:function(){return changeSpeed("start")},disabled:createOption(awardOptions)[0]<=0||awardOptions.currentAwardLeft<=0||0===memberOptions.currentplayers.length,style:{borderRadius:"25px 0 0 25px"},icon:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__.a,{style:{display:"inline-grid",placeItems:"center"}})},awardOptions.currentAwardLeft<createOption(awardOptions)[0]?"\u7ee7\u7eed":"\u5f00\u59cb"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{style:{borderRadius:"0 25px 25px 0"},disabled:tcOptions.tcRunning||awardOptions.currentAwardKey===awardOptions.awards.slice(-1)[0].key,onClick:function(){return handleChangeAward("next")}},"\u4e0b\u4e00\u4e2a\u5956")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__.a,{title:"\u6ce8:\u53ef\u4ee5\u9009\u62e9\u7684\u8303\u56f4\u53d6\u51b3\u4e8e\u5f53\u524d\u5956\u54c1\u603b\u6570",placement:"bottom"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",null,"\u672c\u8f6e\u4e2d\u5956\u4eba\u6570")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{value:lotterOptions.active_resultsNumber,disabled:tcOptions.tcRunning,onChange:function(e){return setLotterOptions(Object.assign({},lotterOptions,{active_resultsNumber:e}))}},createOption(awardOptions).map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Option,{key:e,value:e},e)})))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{style:{marginRight:4},size:"small",disabled:tcOptions.tcRunning,onClick:function(){return handleSettingModal(!0)}},"\u8bbe\u7f6e"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__.a,{title:"\u6ce8:\u91cd\u7f6e\u4f1a\u8fde\u540c\u6e05\u7a7a\u672c\u5730\u5b58\u50a8\u6570\u636e\uff0c\u5237\u65b0\u540e\u4f1a\u4e22\u5931\uff0c\u53ef\u4ee5\u4e2d\u5956\u4eba\u6570\u8bbe0\u540e\u62bd\u53d6\u4e00\u6b21\u6765\u8bb0\u5f55\u6570\u636e",placement:"bottom"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{style:{marginRight:4},size:"small",disabled:tcOptions.tcRunning,onClick:function(){return handleClear("all",lotterOptions.reducemode)}},"\u91cd\u7f6e\u6240\u6709"))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{size:"small",disabled:tcOptions.tcRunning||0===lotterOptions.result.length,onClick:function(){return handleExport()}},"\u5bfc\u51fa\u5168\u90e8"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{size:"small",type:"link",onClick:function(){return Object(_utils_handleExcel__WEBPACK_IMPORTED_MODULE_12__.a)()}},"\u4e0b\u8f7d\u6a21\u677f"))))},RightPart=function(){var e=lotterOptions.result.filter((function(e){return e.awardKey===awardOptions.currentAwardKey}))[0];return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment,null,lotterOptions.shownowresult&&e&&0!==(null===e||void 0===e?void 0:e.awardeeArr.length)?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_7__.a,{title:function(e){return"\u83b7\u5956\u540d\u5355"},columns:[{dataIndex:"username",title:"\u59d3\u540d",width:100},{dataIndex:"usercode",title:"\u7f16\u53f7",width:100}],dataSource:null===e||void 0===e?void 0:e.awardeeArr,rowKey:function(e){return null===e||void 0===e?void 0:e.key},pagination:!1,size:"small",scroll:{y:400}}):null)},BodyPart=function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{id:"myCanvasContainer"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("canvas",{id:"myCanvas",height:document.documentElement.clientHeight-150,width:document.documentElement.clientWidth-200-250},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p",null,"Anything in here will be replaced on browsers that support the canvas element"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("ul",null,memberOptions.currentplayers.length>400?memberOptions.currentplayers.slice(0,400).map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",{key:e.usercode},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("a",{href:"#",target:"_blank",style:{color:"#fff"}},e.username))})):memberOptions.currentplayers.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",{key:e.usercode},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("a",{href:"#",target:"_blank",style:{color:"#fff"}},e.username))}))))))};return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{background:"url(./bg.jpg)",backgroundSize:"cover",backgroundRepeat:"no-repeat"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{display:"grid",gridTemplate:"1fr auto / auto 1fr auto"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"1/2",color:"#fff",display:"grid",placeItems:"center"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(LeftPart,null)),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"2/3",height:"100vh",color:"#fff"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(BodyPart,null)),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"3/4",color:"#fff",display:"grid",placeItems:"end center"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(RightPart,null)),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"1/4",height:"0vh",color:"#fff",display:"grid",placeItems:"center"}})),tcOptions.settingModal?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_SettingModal__WEBPACK_IMPORTED_MODULE_9__.a,{tcOptions_settingModal:tcOptions.settingModal,awardOptions:awardOptions,memberOptions:memberOptions,handleSettingModal:handleSettingModal,backFromChild:backFromChild}):null,awardOptions.awards.map((function(e){if(e.key===awardOptions.currentAwardKey)return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{key:"1",className:"showAward"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("b",null,e.awardlevel,"\uff1a",e.awardname,"\uff08",awardOptions.currentAwardLeft,"/",createOption(awardOptions)[0],"\uff09"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__.b,{size:[8,16],wrap:!0,style:{width:"80%",placeContent:"center"}},memberOptions.awardeePlayers.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{key:t,size:"large"},e.username)}))))})))}},156:function(e,t,a){"use strict";var _=a(46),r=a(0),n=a.n(r),l=a(172),i=a(120),o=a(278),s=a(20),c=a(89),u=a(277),d=a(131),E=a(60),O=a(279),m=a(83),p=l.a.TabPane;t.a=function(e){var t=Object(r.useState)(e.awardOptions),a=Object(_.a)(t,2),f=a[0],M=a[1],P=Object(r.useState)(e.memberOptions),D=Object(_.a)(P,2),w=D[0],b=D[1],y=Object(r.useState)("1"),C=Object(_.a)(y,2),g=C[0],h=C[1],A=Object(r.useState)("0"),R=Object(_.a)(A,2),L=R[0],K=R[1],T=[{dataIndex:"awardlevel",title:"\u5956\u54c1\u7b49\u7ea7",render:function(e,t,a){return n.a.createElement(i.a,{value:e,onChange:function(e){return W("awardOptions","awardlevel",a,e.target.value)}})}},{dataIndex:"awardname",title:"\u5956\u54c1\u540d\u79f0",render:function(e,t,a){return n.a.createElement(i.a,{value:e,onChange:function(e){return W("awardOptions","awardname",a,e.target.value)}})}},{dataIndex:"awardnum",title:"\u5956\u54c1\u6570\u91cf",render:function(e,t,a){return n.a.createElement(o.a,{value:e,min:0,onChange:function(e){return W("awardOptions","awardnum",a,e)}})}},{dataIndex:"\u64cd\u4f5c",title:"\u5220\u9664",render:function(e,t,a){return n.a.createElement(s.a,{type:"primary",danger:!0,onClick:function(){return M(Object.assign({},f,{awards:f.awards.filter((function(e){return e.key!==t.key}))}))}},"\u5220\u9664")}}],I=[{dataIndex:"usercode",title:"\u7f16\u53f7",render:function(e,t,a){return n.a.createElement(i.a,{value:e,onChange:function(e){return W("memberOptions","usercode",a,e.target.value)}})}},{dataIndex:"username",title:"\u59d3\u540d",render:function(e,t,a){return n.a.createElement(i.a,{value:t.username,onChange:function(e){return W("memberOptions","username",a,e.target.value)}})}},{dataIndex:"\u64cd\u4f5c",title:"\u5220\u9664",render:function(e,t,a){return n.a.createElement(s.a,{type:"primary",danger:!0,onClick:function(){return b(Object.assign({},w,{members:w.members.filter((function(e){return e.key!==t.key}))}))}},"\u5220\u9664")}}],W=function(e,t,a,_){if("memberOptions"===e){var r=JSON.parse(JSON.stringify(w));r.members[a][t]=_;var n=!1;if("usercode"===t||"username"===t){var l=[];r.members.map((function(e){l.push(e.usercode+"_"+e.username)})),n=JSON.stringify(Array.from(new Set(l)))!==JSON.stringify(l)}n?c.b.warning("\u4e0d\u5141\u8bb8\u51fa\u73b0\u201c\u7f16\u53f7+\u59d3\u540d\u201d\u540d\u79f0\u5b8c\u5168\u4e00\u81f4\u7684\u884c",5):b(r)}else if("awardOptions"===e){var i=JSON.parse(JSON.stringify(f));i.awards[a][t]=_,"awardnum"===t&&(_=Math.floor(_));var o=!1;if("awardlevel"===t||"awardname"===t){var s=[];i.awards.map((function(e){s.push(e.awardlevel+"_"+e.awardname)})),o=JSON.stringify(Array.from(new Set(s)))!==JSON.stringify(s)}o?c.b.warning("\u4e0d\u5141\u8bb8\u51fa\u73b0\u201c\u5956\u54c1\u7b49\u7ea7+\u5956\u54c1\u540d\u79f0\u201d\u540d\u79f0\u5b8c\u5168\u4e00\u81f4\u7684\u884c",5):M(i)}};return n.a.createElement(u.a,{title:"\u62bd\u5956\u8bbe\u7f6e",style:{paddingTop:8},visible:e.tcOptions_settingModal,onCancel:function(){return e.handleSettingModal(!1)},footer:[n.a.createElement(s.a,{key:"1",onClick:function(){return e.handleSettingModal(!1)}},"\u53d6\u6d88"),n.a.createElement(s.a,{key:"2",danger:!0,onClick:function(){return e.backFromChild(f,w,!0)}},"\u4fee\u6539\u5e76\u91cd\u7f6e"),n.a.createElement(s.a,{key:"3",type:"primary",onClick:function(){return e.backFromChild(f,w,!1)}},"\u4fee\u6539\u4e0d\u91cd\u7f6e")]},n.a.createElement(l.a,{activeKey:g,onChange:function(e){return h(e)},tabBarExtraContent:[n.a.createElement(s.a,{onClick:function(){return function(e){if("1"===e){var t=f.awards,a=t.length?"".concat(Number(t[t.length-1].key)+1):"1";M(Object.assign({},f,{awards:f.awards.concat({awardlevel:"",awardname:"",awardnum:0,key:a})}))}else if("2"===e){var _=w.members,r=_.length?"".concat(Number(_[_.length-1].key)+1):"1";b(Object.assign({},w,{members:w.members.concat({usercode:"",username:"",key:r})}))}}(g)},key:"2",style:{marginRight:4}},n.a.createElement(O.a,{style:{display:"inline-grid",placeItems:"center"}}),"\u589e\u52a0\u884c"),n.a.createElement(s.a,{key:"3",danger:!0,type:"primary",onClick:function(){return b(Object.assign({},w,{members:[]}))}},"\u6e05\u7a7a\u4eba\u5458")]},n.a.createElement(p,{tab:"\u5956\u54c1",key:"1"},n.a.createElement(d.a,{columns:T,dataSource:f.awards,rowKey:function(e){return e.key},pagination:!1})),n.a.createElement(p,{tab:"\u4eba\u5458",key:"2"},n.a.createElement(E.a,{title:"excel\u7b2c\u4e00\u4e2a\u5de5\u4f5c\u8868\u4e2d\u5de6\u9876\u683c[\u7f16\u53f7]\u548c[\u59d3\u540d]\u4e24\u5217"},n.a.createElement("input",{type:"file",accept:".xlsx, .xls",style:{display:"inline-block",width:"auto"},onChange:function(e){var t;e.persist(),t=e.target,Object(m.c)(t).then((function(e){if(e&&(null===e||void 0===e?void 0:e.length)){var t=e.map((function(e){return e.usercode}));if(JSON.stringify(Array.from(new Set(t)))!==JSON.stringify(t))c.b.warning("excel\u4e2d\u6709\u91cd\u590d\u7684\u7f16\u53f7",5),K("2");else{var a=JSON.parse(JSON.stringify(w)),_=a.members,r=_.length?"".concat(Number(_.slice(-1)[0].key)+1):"1",n={};_.map((function(e){n[e.usercode+"_"+e.username]=1}));var l=JSON.parse(JSON.stringify(n));e.map((function(e){var t=e.usercode+"_"+e.username;l[t]?(l[t]+=1,a.members.push({usercode:e.usercode,username:"".concat(e.username,"(").concat(l[e.usercode+"_"+e.username],")"),key:r}),r="".concat(Number(r)+1)):(l[t]=1,a.members.push({usercode:e.usercode,username:e.username,key:r}),r="".concat(Number(r)+1))})),K("1"),b(a)}}})).catch((function(e){K("2"),console.log("\u5f02\u5e38"),console.log(e)})),e.target.value=""}})),"1"===L?n.a.createElement("span",{style:{color:"green"}},"\u4e0a\u4f20\u6210\u529f"):"2"===L?n.a.createElement("span",{style:{color:"red"}},"\u4e0a\u4f20\u5931\u8d25"):null,n.a.createElement(d.a,{size:"small",columns:I,dataSource:w.members,rowKey:function(e){return e.key},pagination:!1,scroll:{y:300}}))))}},177:function(e,t,a){e.exports=a(276)},182:function(e,t,a){},187:function(e,t){},188:function(e,t){},271:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var _=a(0),r=a.n(_),n=a(27),l=a.n(n),i=(a(182),a(163)),o=a(24),s=a(155),c=function(e){return r.a.createElement(_.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(o.d,null,r.a.createElement(o.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(o.b,{exact:!0,path:"/home",component:s.a}))))};a(275);var u=function(){return r.a.createElement(c,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i}));var _=a(65),r=a.n(_),n=function(e){return new Promise((function(t){var a;e.files||t(!1);var _=e.files[0],n=new FileReader;n.onload=function(e){var _=e.target.result;a=r.a.read(_,{type:"binary"});var n=r.a.utils.sheet_to_json(a.Sheets[a.SheetNames[0]]);n?(n=n.map((function(e){if(e["\u7f16\u53f7"]&&e["\u59d3\u540d"])return{usercode:e["\u7f16\u53f7"],username:e["\u59d3\u540d"]}})),t(n)):t(!1)},n.readAsBinaryString(_)}))},l=function(e){var t=[];Object.keys(e).map((function(a){t.push(a),e[a]=e[a].map((function(e){return{"\u7f16\u53f7":e.usercode,"\u59d3\u540d":e.username}})),e[a]=r.a.utils.json_to_sheet(e[a])}));for(var a={SheetNames:t,Sheets:e,Props:{}},_=r.a.write(a,{bookType:"xlsx",type:"buffer",compression:!0}),n=new ArrayBuffer(_.length),l=new Uint8Array(n),i=0;i!=_.length;++i)l[i]=255&_.charCodeAt(i);var o=document.createElement("a");o.download="\u4e2d\u5956\u7ed3\u679c.xlsx",o.style.display="none";var s=new Blob([n],{type:"application/octet-stream"});o.href=URL.createObjectURL(s),document.body.appendChild(o),o.click(),document.body.removeChild(o)},i=function(){for(var e={SheetNames:["\u62bd\u5956\u540d\u5355"],Sheets:{"\u62bd\u5956\u540d\u5355":r.a.utils.json_to_sheet([{"\u7f16\u53f7":"","\u59d3\u540d":""}])},Props:{}},t=r.a.write(e,{bookType:"xlsx",type:"buffer",compression:!0}),a=new ArrayBuffer(t.length),_=new Uint8Array(a),n=0;n!=t.length;++n)_[n]=255&t.charCodeAt(n);var l=document.createElement("a");l.download="\u62bd\u5956\u540d\u5355\u6a21\u677f.xlsx",l.style.display="none";var i=new Blob([a],{type:"application/octet-stream"});l.href=URL.createObjectURL(i),document.body.appendChild(l),l.click(),document.body.removeChild(l)}}},[[177,1,2]]]);
//# sourceMappingURL=main.0f1c4b07.chunk.js.map