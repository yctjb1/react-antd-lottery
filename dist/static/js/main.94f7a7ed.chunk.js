(this["webpackJsonpreact-antd-lottery"]=this["webpackJsonpreact-antd-lottery"]||[]).push([[0],{142:function(e,t){},160:function(module,__webpack_exports__,__webpack_require__){"use strict";var E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(122),E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(46),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(60),antd__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(65),antd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(287),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(138),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(288),_components_SettingModal__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(161),_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(286),_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(285),_utils_handleExcel__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(84),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(54),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13__),lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(135),lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14__),lodash_uniqWith__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(167),lodash_uniqWith__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(lodash_uniqWith__WEBPACK_IMPORTED_MODULE_15__),lodash_isEqual__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(32),lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_16__),_index_less__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(276),_index_less__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_17__),Option=antd__WEBPACK_IMPORTED_MODULE_3__.a.Option,getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e};__webpack_exports__.a=function(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({tcRunning:!1,settingModal:!1}),_useState2=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),tcOptions=_useState2[0],setTCOptions=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({awards:[{awardlevel:"\u4e00\u7b49\u5956",awardname:"\u6469\u6258",awardnum:1,key:"1"},{awardlevel:"\u4e8c\u7b49\u5956",awardname:"\u5355\u8f66",awardnum:2,key:"2"}],currentAwardKey:"1",currentAwardLeft:0}),_useState4=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),awardOptions=_useState4[0],setAwardOptions=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({awardeePlayers:[],members:[{usercode:"01",username:"\u6d4b\u8bd5\u7532",key:"1"},{usercode:"02",username:"\u6d4b\u8bd5\u4e59",key:"2"}],currentplayers:[]}),_useState6=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),memberOptions=_useState6[0],setMemberOptions=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({reducemode:!0,shownowresult:!1,active_resultsNumber:0,result:[]}),_useState8=Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState7,2),lotterOptions=_useState8[0],setLotterOptions=_useState8[1];Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){if(queryLocalStorage());else{setMemberOptions(Object.assign({},memberOptions,{currentplayers:memberOptions.members}));var e=createOption(awardOptions)[0];setLotterOptions(Object.assign({},lotterOptions,{active_resultsNumber:e})),updateCurrentAwardLeft()}initTC()}),[]),Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){tcOptions.tcRunning?initTC("TagCanvas.SetSpeed('myCanvas', [5, 1]);TagCanvas.Reload('myCanvas')"):initTC()}),[tcOptions.tcRunning,memberOptions,tcOptions.settingModal,awardOptions,lotterOptions]);var initTC=function initTC(str){eval("try {\n             TagCanvas.Start(\n               'myCanvas',\n               '',\n               {textColour: null,\n                dragControl: 1,\n                decel: 0.95,\n                textHeight: 14,\n                minSpeed: 0.01,\n                initial: [\n                  0.1 * Math.random() + 0.01,\n                  -(0.1 * Math.random() + 0.01),\n                ]\n            });\n            ".concat(str||"","\n           }\n           catch(e) {\n             document.getElementById('myCanvasContainer').style.display = 'none';\n           }"))},changeSpeed=function(e){"start"===e?setTCOptions(Object.assign({},tcOptions,{tcRunning:!0})):"stop"===e&&setTCOptions(Object.assign({},tcOptions,{tcRunning:!1}))},handleSettingModal=function(e){setTCOptions(Object.assign({},tcOptions,{settingModal:e}))},backFromChild=function(e,t,_){e.awards=e.awards.filter((function(e){return!!(e.awardlevel&&e.awardname&&e.awardnum)})),t.members=t.members.filter((function(e){return!(!e.usercode||!e.username)}));var a,r=memberOptions.members,n=t.members,l=awardOptions.awards,i=e.awards,o=lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14___default()(r,n,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),s=lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(r,o,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),c=lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(n,o,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),u=s.map((function(e){return e.key})),d=c.map((function(e){return e.key})),E=c.filter((function(e){return u.indexOf(e.key)>-1})),O=s.filter((function(e){return d.indexOf(e.key)>-1})),m=(lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(c,E,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(s,O,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),lodash_intersectionWith__WEBPACK_IMPORTED_MODULE_14___default()(l,i,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a)),p=lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(l,m,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),f=lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(i,m,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),M=p.map((function(e){return e.key})),P=f.map((function(e){return e.key})),D=f.filter((function(e){return M.indexOf(e.key)>-1})),w=p.filter((function(e){return P.indexOf(e.key)>-1})),b=(lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(f,D,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),lodash_differenceWith__WEBPACK_IMPORTED_MODULE_13___default()(p,w,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a).map((function(e){return e.key}))),y=JSON.parse(JSON.stringify(lotterOptions)),h=[];(y.result.map((function(e,t){var _;b.indexOf(e.awardKey)>-1&&((_=h).push.apply(_,Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.awardeeArr)),delete y.result[t])})),y.result=y.result.filter((function(e){return e})),h=lodash_uniqWith__WEBPACK_IMPORTED_MODULE_15___default()(h,lodash_isEqual__WEBPACK_IMPORTED_MODULE_16___default.a),y.reducemode)&&(a=t.currentplayers).push.apply(a,Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(h));if(0===e.awards.filter((function(t){return t.key===e.currentAwardKey})).length){var C=e.awards.slice(-1)[0];e.currentAwardKey=C.key,t.awardeePlayers=[],y.active_resultsNumber=C.awardnum}var A=n.map((function(e){return e.key}));t.awardeePlayers=t.awardeePlayers.filter((function(e){return A.indexOf(e.key)>-1})),y.result=y.result.map((function(e){return e.awardeeArr=e.awardeeArr.filter((function(e){return A.indexOf(e.key)>-1})),e})),_&&(t.awardeePlayers=[],y.result=[],t.currentplayers=t.members);var g=0,R=y.result.filter((function(t){return(null===t||void 0===t?void 0:t.awardKey)===e.currentAwardKey})),L=R.length?R[0].awardeeArr.length:0;e.awards.map((function(t){if(t.key===e.currentAwardKey){var _=Number(t.awardnum);g=_-L}})),e.currentAwardLeft=g,handleSettingModal(!1),setAwardOptions(e),setMemberOptions(t),setLotterOptions(y)},handleChangeAward=function(e){var t,_;if(setMemberOptions(Object.assign({},memberOptions,{awardeePlayers:[]})),"next"===e){var a=-1,r=awardOptions.awards;if(r.map((function(e,t){e.key===awardOptions.currentAwardKey&&(a=t+1)})),!(a>-1&&a<=r.length-1))return;t=r[a].key}else t=e;var n=0,l=lotterOptions.result.filter((function(e){return e.awardKey==t})),i=l.length?l[0].awardeeArr.length:0;awardOptions.awards.map((function(e){e.key===t&&(n=Number(e.awardnum)),n-=i})),_=Object.assign({},awardOptions,{currentAwardKey:t,currentAwardLeft:n});var o=createOption(_)[0];setLotterOptions(Object.assign({},lotterOptions,{active_resultsNumber:o})),setAwardOptions(_)},handleStop=function(){var e=lotterOptions.active_resultsNumber,t=createOption(awardOptions)[0],_=awardOptions.currentAwardLeft,a=JSON.parse(JSON.stringify(memberOptions.members)),r=JSON.parse(JSON.stringify(memberOptions.currentplayers)),n=lotterOptions.reducemode?r.length:a.length,l=-1,i=JSON.parse(JSON.stringify(lotterOptions.result)),o=[];i.length&&i.map((function(e,t){e.awardKey===awardOptions.currentAwardKey&&(l=t),o.push.apply(o,Object(E_learn_react_learn_gitdown_react_antd_lottery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.awardeeArr))}));for(var s,c,u,d=Math.min(e,t,_,n),E=[],O=0;O<d&&E.length<e;O++){var m=getRandomInt(0,n-1),p=lotterOptions.reducemode?r[m]:a[m];if(JSON.stringify(E).indexOf(JSON.stringify(p))>-1)d+=1;else{var f=l>-1?i[l].awardeeArr:[];JSON.stringify(f).indexOf(JSON.stringify(p))>-1?d+=1:JSON.stringify(o).indexOf(JSON.stringify(p))>-1?lotterOptions.reducemode?d+=1:(E.push(p)):(E.push(p),n--,lotterOptions.reducemode&&r.splice(m,1))}}l>-1?null===(s=i[l])||void 0===s||(c=s.awardeeArr).push.apply(c,E):i.push({awardKey:awardOptions.currentAwardKey,awardeeArr:E});lotterOptions.reducemode?(u=Object.assign({},memberOptions,{currentplayers:r,awardeePlayers:E}),setMemberOptions(u)):(u=Object.assign({},memberOptions,{awardeePlayers:E}),setMemberOptions(u));var M=Object.assign({},lotterOptions,{shownowresult:!0,result:i});setLotterOptions(M);var P=Object.assign({},awardOptions,{currentAwardLeft:_-E.length});setAwardOptions(P);var D=Object.assign({},tcOptions,{tcRunning:!1});setTCOptions(D),updateLocalStorage("updateAll",{tcOptions:D,awardOptions:P,memberOptions:u,lotterOptions:M})},handleClear=function(e,t){if("all"===e){setMemberOptions(Object.assign({},memberOptions,{currentplayers:memberOptions.members,awardeePlayers:[]}));var _=Object.assign({},lotterOptions,{shownowresult:!1,reducemode:t||!1,result:[]});setLotterOptions(_),updateCurrentAwardLeft(awardOptions.currentAwardKey,0,_),updateLocalStorage("clearAll")}},handleReduceMode=function(e){handleClear("all",e)},updateCurrentAwardLeft=function(e,t,_){var a=e||awardOptions.awards[0].key,r=0,n=(_||lotterOptions).result.filter((function(e){return e.awardKey===a})),l=n.length?n[0].awardeeArr.length:0;awardOptions.awards.map((function(e){e.key===a&&(r=Number(e.awardnum),t&&(r-=t),r-=l)})),setAwardOptions(Object.assign({},awardOptions,{currentAwardLeft:r}))},updateLocalStorage=function(e,t){e&&"clearAll"===e?localStorage.removeItem("react_antd_lottery"):localStorage.setItem("react_antd_lottery",JSON.stringify(t))},queryLocalStorage=function(){var e=localStorage.getItem("react_antd_lottery")||void 0;return!!e&&(e=JSON.parse(e),setTCOptions(e.tcOptions),setAwardOptions(e.awardOptions),setMemberOptions(e.memberOptions),setLotterOptions(e.lotterOptions),!0)},handleExport=function(){var e=lotterOptions.result,t=awardOptions.awards,_=[];e.map((function(e){var a=t.filter((function(t){return t.key===e.awardKey}))[0];_[a.awardlevel]=e.awardeeArr})),Object(_utils_handleExcel__WEBPACK_IMPORTED_MODULE_12__.b)(_)},createOption=function(e){var t=0;e.awards.map((function(_){_.key===e.currentAwardKey&&(t=Number(_.awardnum)<0?0:Number(_.awardnum))}));for(var _=[],a=t;_.push(a--)<t+1;);return _},LeftPart=function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("ul",{className:"operation_ul"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,"\u5956\u9879:",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{value:awardOptions.currentAwardKey,style:{width:120},disabled:tcOptions.tcRunning,onChange:function(e){return handleChangeAward(e)}},awardOptions.awards.map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Option,{key:e.key,value:e.key},e.awardlevel)})))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__.a,{title:"\u6ce8:\u5207\u6362\u5254\u9664\u5c06\u91cd\u7f6e\u4e2d\u5956\u7ed3\u679c"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_5__.a,{disabled:tcOptions.tcRunning,checkedChildren:"\u5254\u9664\u5df2\u4e2d\u5956",unCheckedChildren:"\u4fdd\u7559\u5df2\u4e2d\u5956",checked:lotterOptions.reducemode,onChange:function(e){return handleReduceMode(e)}}),"\u5269\u4f59:",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("b",null,memberOptions.currentplayers.length,"\u4eba"))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,tcOptions.tcRunning?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{onClick:function(){return handleStop()},style:{borderRadius:"25px 0 0 25px"},icon:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_11__.a,{style:{display:"inline-grid",placeItems:"center"}})},"\u505c\u6b62"):react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{onClick:function(){return changeSpeed("start")},disabled:createOption(awardOptions)[0]<=0||awardOptions.currentAwardLeft<=0||0===memberOptions.currentplayers.length,style:{borderRadius:"25px 0 0 25px"},icon:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_10__.a,{style:{display:"inline-grid",placeItems:"center"}})},awardOptions.currentAwardLeft<createOption(awardOptions)[0]?"\u7ee7\u7eed":"\u5f00\u59cb"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{style:{borderRadius:"0 25px 25px 0"},disabled:tcOptions.tcRunning||awardOptions.currentAwardKey===awardOptions.awards.slice(-1)[0].key,onClick:function(){return handleChangeAward("next")}},"\u4e0b\u4e00\u4e2a\u5956")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__.a,{title:"\u6ce8:\u53ef\u4ee5\u9009\u62e9\u7684\u8303\u56f4\u53d6\u51b3\u4e8e\u5f53\u524d\u5956\u54c1\u603b\u6570",placement:"bottom"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",null,"\u672c\u8f6e\u4e2d\u5956\u4eba\u6570")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_3__.a,{value:lotterOptions.active_resultsNumber,disabled:tcOptions.tcRunning,onChange:function(e){return setLotterOptions(Object.assign({},lotterOptions,{active_resultsNumber:e}))}},createOption(awardOptions).map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Option,{key:e,value:e},e)})))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{style:{marginRight:4},size:"small",disabled:tcOptions.tcRunning,onClick:function(){return handleSettingModal(!0)}},"\u8bbe\u7f6e"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_4__.a,{title:"\u6ce8:\u91cd\u7f6e\u4f1a\u8fde\u540c\u6e05\u7a7a\u672c\u5730\u5b58\u50a8\u6570\u636e\uff0c\u5237\u65b0\u540e\u4f1a\u4e22\u5931\uff0c\u53ef\u4ee5\u4e2d\u5956\u4eba\u6570\u8bbe0\u540e\u62bd\u53d6\u4e00\u6b21\u6765\u8bb0\u5f55\u6570\u636e",placement:"bottom"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{style:{marginRight:4},size:"small",disabled:tcOptions.tcRunning,onClick:function(){return handleClear("all",lotterOptions.reducemode)}},"\u91cd\u7f6e\u6240\u6709"))),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{size:"small",disabled:tcOptions.tcRunning||0===lotterOptions.result.length,onClick:function(){return handleExport()}},"\u5bfc\u51fa\u5168\u90e8"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{size:"small",type:"link",onClick:function(){return Object(_utils_handleExcel__WEBPACK_IMPORTED_MODULE_12__.a)()}},"\u4e0b\u8f7d\u6a21\u677f"))))},RightPart=function(){var e=lotterOptions.result.filter((function(e){return(null===e||void 0===e?void 0:e.awardKey)===awardOptions.currentAwardKey}))[0];return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment,null,lotterOptions.shownowresult&&e&&0!==(null===e||void 0===e?void 0:e.awardeeArr.length)?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_7__.a,{title:function(e){return"\u83b7\u5956\u540d\u5355"},columns:[{dataIndex:"username",title:"\u59d3\u540d",width:100},{dataIndex:"usercode",title:"\u7f16\u53f7",width:100}],dataSource:null===e||void 0===e?void 0:e.awardeeArr,rowKey:function(e){return null===e||void 0===e?void 0:e.key},pagination:!1,size:"small",scroll:{y:400}}):null)},BodyPart=function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{id:"myCanvasContainer"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("canvas",{id:"myCanvas",height:document.documentElement.clientHeight-150,width:document.documentElement.clientWidth-200-250},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p",null,"Anything in here will be replaced on browsers that support the canvas element"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("ul",null,memberOptions.currentplayers.length>400?memberOptions.currentplayers.slice(0,400).map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",{key:e.usercode},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("a",{href:"#",target:"_blank",style:{color:"#fff"}},e.username))})):memberOptions.currentplayers.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",{key:e.usercode},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("a",{href:"#",target:"_blank",style:{color:"#fff"}},e.username))}))))))};return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{background:"url(./bg.jpg)",backgroundSize:"cover",backgroundRepeat:"no-repeat"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{display:"grid",gridTemplate:"1fr auto / auto 1fr auto"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"1/2",color:"#fff",display:"grid",placeItems:"center"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(LeftPart,null)),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"2/3",height:"100vh",color:"#fff"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(BodyPart,null)),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"3/4",color:"#fff",display:"grid",placeItems:"end center"}},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(RightPart,null)),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{gridColumn:"1/4",height:"0vh",color:"#fff",display:"grid",placeItems:"center"}})),tcOptions.settingModal?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_SettingModal__WEBPACK_IMPORTED_MODULE_9__.a,{tcOptions_settingModal:tcOptions.settingModal,awardOptions:awardOptions,memberOptions:memberOptions,handleSettingModal:handleSettingModal,backFromChild:backFromChild}):null,awardOptions.awards.map((function(e){if(e.key===awardOptions.currentAwardKey){var t=createOption(awardOptions)[0],_=t-awardOptions.currentAwardLeft;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{key:"1",className:"showAward"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("b",null,e.awardlevel,"\uff1a",e.awardname,"\uff08",_,"/",t,"\uff09"),0!==memberOptions.awardeePlayers.length?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{style:{color:"yellow",width:"100%",textAlign:"center",fontSize:"20px"}},"\u672c\u8f6e\u4e2d\u5956\u540d\u5355:"):null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_8__.b,{size:[8,16],wrap:!0,style:{width:"80%",placeContent:"center"}},memberOptions.awardeePlayers.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_6__.a,{key:t,size:"large"},e.username)}))))}})))}},161:function(e,t,_){"use strict";var a=_(46),r=_(0),n=_.n(r),l=_(176),i=_(123),o=_(283),s=_(20),c=_(67),u=_(282),d=_(138),E=_(284),O=_(84),m=_(133),p=_.n(m),f=l.a.TabPane;t.a=function(e){var t=Object(r.useState)(e.awardOptions),_=Object(a.a)(t,2),m=_[0],M=_[1],P=Object(r.useState)(e.memberOptions),D=Object(a.a)(P,2),w=D[0],b=D[1],y=Object(r.useState)("1"),h=Object(a.a)(y,2),C=h[0],A=h[1],g=Object(r.useState)("0"),R=Object(a.a)(g,2),L=R[0],K=R[1],T=[{dataIndex:"awardlevel",title:"\u5956\u54c1\u7b49\u7ea7",render:function(e,t,_){return n.a.createElement(i.a,{value:e,onChange:function(e){return I("awardOptions","awardlevel",_,e.target.value)}})}},{dataIndex:"awardname",title:"\u5956\u54c1\u540d\u79f0",render:function(e,t,_){return n.a.createElement(i.a,{value:e,onChange:function(e){return I("awardOptions","awardname",_,e.target.value)}})}},{dataIndex:"awardnum",title:"\u5956\u54c1\u6570\u91cf",render:function(e,t,_){return n.a.createElement(o.a,{value:e,min:0,onChange:function(e){return I("awardOptions","awardnum",_,e)}})}},{dataIndex:"\u64cd\u4f5c",title:"\u5220\u9664",render:function(e,t,_){return n.a.createElement(s.a,{type:"primary",danger:!0,onClick:function(){return M(Object.assign({},m,{awards:m.awards.filter((function(e){return e.key!==t.key}))}))}},"\u5220\u9664")}}],W=[{dataIndex:"usercode",title:"\u7f16\u53f7",render:function(e,t,_){return n.a.createElement(i.a,{value:e,onChange:function(e){return I("memberOptions","usercode",_,e.target.value)}})}},{dataIndex:"username",title:"\u59d3\u540d",render:function(e,t,_){return n.a.createElement(i.a,{value:t.username,onChange:function(e){return I("memberOptions","username",_,e.target.value)}})}},{dataIndex:"\u64cd\u4f5c",title:"\u5220\u9664",render:function(e,t,_){return n.a.createElement(s.a,{type:"primary",danger:!0,onClick:function(){return b(Object.assign({},w,{members:w.members.filter((function(e){return e.key!==t.key}))}))}},"\u5220\u9664")}}],I=function(e,t,_,a){if("memberOptions"===e){var r=JSON.parse(JSON.stringify(w));r.members[_][t]=a;var n=!1;if("usercode"===t||"username"===t){var l=[];r.members.map((function(e){l.push(e.usercode+"_"+e.username)})),n=JSON.stringify(Array.from(new Set(l)))!==JSON.stringify(l)}n?c.b.warning("\u4e0d\u5141\u8bb8\u51fa\u73b0\u201c\u7f16\u53f7+\u59d3\u540d\u201d\u540d\u79f0\u5b8c\u5168\u4e00\u81f4\u7684\u884c",5):b(r)}else if("awardOptions"===e){var i=JSON.parse(JSON.stringify(m));i.awards[_][t]=a,"awardnum"===t&&(a=Math.floor(a));var o=!1;if("awardlevel"===t||"awardname"===t){var s=[];i.awards.map((function(e){s.push(e.awardlevel+"_"+e.awardname)})),o=JSON.stringify(Array.from(new Set(s)))!==JSON.stringify(s)}o?c.b.warning("\u4e0d\u5141\u8bb8\u51fa\u73b0\u201c\u5956\u54c1\u7b49\u7ea7+\u5956\u54c1\u540d\u79f0\u201d\u540d\u79f0\u5b8c\u5168\u4e00\u81f4\u7684\u884c",5):M(i)}};return n.a.createElement(u.a,{title:"\u62bd\u5956\u8bbe\u7f6e",style:{paddingTop:8},visible:e.tcOptions_settingModal,onCancel:function(){return e.handleSettingModal(!1)},footer:[n.a.createElement(s.a,{key:"1",onClick:function(){return e.handleSettingModal(!1)}},"\u53d6\u6d88"),n.a.createElement(s.a,{key:"2",danger:!0,onClick:function(){0===m.awards.length?c.b.warning("\u5956\u9879\u4e0d\u53ef\u4e3a\u96f6"):e.backFromChild(m,w,!0)}},"\u4fee\u6539\u5e76\u91cd\u7f6e"),n.a.createElement(s.a,{key:"3",type:"primary",onClick:function(){0===m.awards.length?c.b.warning("\u5956\u9879\u4e0d\u53ef\u4e3a\u96f6"):e.backFromChild(m,w,!1)}},"\u4fee\u6539\u4e0d\u91cd\u7f6e")]},n.a.createElement(l.a,{activeKey:C,onChange:function(e){return A(e)},tabBarExtraContent:[n.a.createElement(s.a,{onClick:function(){return function(e){if("1"===e){var t=m.awards,_=t.length?"".concat(Number(t[t.length-1].key)+1):"".concat(p()().valueOf());M(Object.assign({},m,{awards:m.awards.concat({awardlevel:"",awardname:"",awardnum:0,key:_})}))}else if("2"===e){var a=w.members,r=a.length?"".concat(Number(a[a.length-1].key)+1):"".concat(p()().valueOf());b(Object.assign({},w,{members:w.members.concat({usercode:"",username:"",key:r})}))}}(C)},key:"2",style:{marginRight:4}},n.a.createElement(E.a,{style:{display:"inline-grid",placeItems:"center"}}),"\u589e\u52a0\u884c"),n.a.createElement(s.a,{key:"3",danger:!0,type:"primary",onClick:function(){return b(Object.assign({},w,{members:[]}))}},"\u6e05\u7a7a\u4eba\u5458")]},n.a.createElement(f,{tab:"\u5956\u54c1",key:"1"},n.a.createElement(d.a,{columns:T,dataSource:m.awards,rowKey:function(e){return e.key},pagination:!1})),n.a.createElement(f,{tab:"\u4eba\u5458",key:"2"},n.a.createElement("input",{type:"file",accept:".xlsx, .xls",style:{display:"inline-block",width:"auto"},onChange:function(e){var t;e.persist(),t=e.target,Object(O.c)(t).then((function(e){if(e&&(null===e||void 0===e?void 0:e.length)){var t=e.map((function(e){return e.usercode}));if(JSON.stringify(Array.from(new Set(t)))!==JSON.stringify(t))c.b.warning("excel\u4e2d\u6709\u91cd\u590d\u7684\u7f16\u53f7",5),K("2");else{var _=JSON.parse(JSON.stringify(w)),a=_.members,r=a.length?"".concat(Number(a.slice(-1)[0].key)+1):"1",n={};a.map((function(e){n[e.usercode+"_"+e.username]=1}));var l=JSON.parse(JSON.stringify(n));e.map((function(e){var t=e.usercode+"_"+e.username;l[t]?(l[t]+=1,_.members.push({usercode:e.usercode,username:"".concat(e.username,"(").concat(l[e.usercode+"_"+e.username],")"),key:r}),r="".concat(Number(r)+1)):(l[t]=1,_.members.push({usercode:e.usercode,username:e.username,key:r}),r="".concat(Number(r)+1))})),K("1"),b(_)}}})).catch((function(e){K("2"),console.log("\u5f02\u5e38"),console.log(e)})),e.target.value=""}}),"1"===L?n.a.createElement("span",{style:{color:"green"}},"\u4e0a\u4f20\u6210\u529f"):"2"===L?n.a.createElement("span",{style:{color:"red"}},"\u4e0a\u4f20\u5931\u8d25"):null,n.a.createElement(d.a,{size:"small",columns:W,dataSource:w.members,rowKey:function(e){return e.key},pagination:!1,scroll:{y:300}}))))}},181:function(e,t,_){e.exports=_(281)},186:function(e,t,_){},191:function(e,t){},192:function(e,t){},276:function(e,t,_){},280:function(e,t,_){},281:function(e,t,_){"use strict";_.r(t);var a=_(0),r=_.n(a),n=_(27),l=_.n(n),i=(_(186),_(168)),o=_(24),s=_(160),c=function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(o.d,null,r.a.createElement(o.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(o.b,{exact:!0,path:"/home",component:s.a}))))};_(280);var u=function(){return r.a.createElement(c,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,t,_){"use strict";_.d(t,"c",(function(){return n})),_.d(t,"b",(function(){return l})),_.d(t,"a",(function(){return i}));var a=_(66),r=_.n(a),n=function(e){return new Promise((function(t){var _;e.files||t(!1);var a=e.files[0],n=new FileReader;n.onload=function(e){var a=e.target.result;_=r.a.read(a,{type:"binary"});var n=r.a.utils.sheet_to_json(_.Sheets[_.SheetNames[0]]);n?(n=n.map((function(e){if(e["\u7f16\u53f7"]&&e["\u59d3\u540d"])return{usercode:e["\u7f16\u53f7"],username:e["\u59d3\u540d"]}})),t(n)):t(!1)},n.readAsBinaryString(a)}))},l=function(e){var t=[];Object.keys(e).map((function(_){t.push(_),e[_]=e[_].map((function(e){return{"\u7f16\u53f7":e.usercode,"\u59d3\u540d":e.username}})),e[_]=r.a.utils.json_to_sheet(e[_])}));for(var _={SheetNames:t,Sheets:e,Props:{}},a=r.a.write(_,{bookType:"xlsx",type:"buffer",compression:!0}),n=new ArrayBuffer(a.length),l=new Uint8Array(n),i=0;i!=a.length;++i)l[i]=255&a.charCodeAt(i);var o=document.createElement("a");o.download="\u4e2d\u5956\u7ed3\u679c.xlsx",o.style.display="none";var s=new Blob([n],{type:"application/octet-stream"});o.href=URL.createObjectURL(s),document.body.appendChild(o),o.click(),document.body.removeChild(o)},i=function(){for(var e={SheetNames:["\u62bd\u5956\u540d\u5355"],Sheets:{"\u62bd\u5956\u540d\u5355":r.a.utils.json_to_sheet([{"\u7f16\u53f7":"","\u59d3\u540d":""}])},Props:{}},t=r.a.write(e,{bookType:"xlsx",type:"buffer",compression:!0}),_=new ArrayBuffer(t.length),a=new Uint8Array(_),n=0;n!=t.length;++n)a[n]=255&t.charCodeAt(n);var l=document.createElement("a");l.download="\u62bd\u5956\u540d\u5355\u6a21\u677f.xlsx",l.style.display="none";var i=new Blob([_],{type:"application/octet-stream"});l.href=URL.createObjectURL(i),document.body.appendChild(l),l.click(),document.body.removeChild(l)}}},[[181,1,2]]]);
//# sourceMappingURL=main.94f7a7ed.chunk.js.map